name: Create repo
on:
  workflow_dispatch:

jobs:
  create-repo:
    runs-on: ubuntu-latest
    if: true
    steps:
      - uses: octokit/request-action@v2.x
        id: create
        with:
          route: POST /orgs/{org}/repos
          org: Material-Blazor
          accept: 'application/vnd.github.v3+json'
          name: TestingTheApiIgnoreMe
          description: This is an automatically generated repo. Ignore me.
          visibility: private
        env:
          GITHUB_TOKEN: ${{ secrets.GH_PAT }}
      - run: echo "${{ steps.create.outputs.data }}"
  deploy-to-repo:
    needs: [ create-repo ]
    runs-on: ubuntu-latest
    if: true
    steps:
    - name: Create some content
      run: |
        mkdir deployroot
        echo "Hello PR" > deployroot/Readme.md
    - name: Deploy ðŸš€
      uses: JamesIves/github-pages-deploy-action@4.1.0
      with:
        token: ${{secrets.GH_PAT}}
        branch: gh-pages
        folder: 'deployroot'
  delete-repo:
    runs-on: ubuntu-latest
    if: false
    steps:
      - uses: octokit/request-action@v2.x
        id: create
        with:
          route: DELETE /repos/{org}/{repo}
          org: Material-Blazor
          accept: 'application/vnd.github.v3+json'
          repo: TestingTheApiIgnoreMe
        env:
          GITHUB_TOKEN: ${{ secrets.GH_PAT }}
      - run: echo "${{ steps.create.outputs.data }}"
